(self.webpackChunkpos_base=self.webpackChunkpos_base||[]).push([[181],{6181:t=>{var e="SOCKET_EVENT",o="SocketsForCordova";function n(){this._state=n.State.CLOSED,this.onData=null,this.onClose=null,this.onError=null,this.socketKey=r()}n.State={},n.State[n.State.CLOSED=0]="CLOSED",n.State[n.State.OPENING=1]="OPENING",n.State[n.State.OPENED=2]="OPENED",n.State[n.State.CLOSING=3]="CLOSING",n.ErrorType={},n.ErrorType[n.ErrorType.GENERAL=0]="general",n.ErrorType[n.ErrorType.OPEN_TIMEOUT=1]="openTimeout",n.ErrorType[n.ErrorType.WRITE_TIMEOUT=2]="writeTimeout",n.prototype.open=function(t,r,a,i){if(a=a||function(){},i=i||function(){},this._ensureState(n.State.CLOSED,i)){var s=this;s._state=n.State.OPENING,cordova.exec((function(){s._state=n.State.OPENED,window.document.addEventListener(e,c),a()}),(function(t){s._state=n.State.CLOSED,i(t)}),o,"open",[this.socketKey,t,r])}function c(t){var o=t.payload;if(o.socketKey===s.socketKey)switch(o.type){case"Close":s._state=n.State.CLOSED,window.document.removeEventListener(e,c),s.onClose(o.hasError);break;case"DataReceived":s.onData(new Uint8Array(o.data));break;case"Error":s.onError(o);break;default:console.error("SocketsForCordova: Unknown event type "+o.type+", socket key: "+o.socketKey)}}},n.prototype.write=function(t,e,r){if(e=e||function(){},r=r||function(){},this._ensureState(n.State.OPENED,r)){var a=t instanceof Uint8Array?n._copyToArray(t):t;cordova.exec(e,r,o,"write",[this.socketKey,a])}},n.prototype.shutdownWrite=function(t,e){t=t||function(){},e=e||function(){},this._ensureState(n.State.OPENED,e)&&cordova.exec(t,e,o,"shutdownWrite",[this.socketKey])},n.prototype.close=function(t,e){t=t||function(){},e=e||function(){},this._ensureState(n.State.OPENED,e)&&(this._state=n.State.CLOSING,cordova.exec(t,e,o,"close",[this.socketKey]))},Object.defineProperty(n.prototype,"state",{get:function(){return this._state},enumerable:!0,configurable:!0}),n.prototype._ensureState=function(t,e){var o=this._state;return o==t||(window.setTimeout((function(){e("Invalid operation for this socket state: "+n.State[o])})),!1)},n.dispatchEvent=function(t){var o=document.createEvent("Events");o.initEvent(e,!0,!0),o.payload=t,document.dispatchEvent(o)},n._copyToArray=function(t){for(var e=new Array(t.length),o=0;o<t.length;o++)e[o]=t[o];return e};var r=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}();navigator.userAgent.match(/iemobile/i)&&window.document.addEventListener("deviceready",(function(){cordova.exec(n.dispatchEvent,(function(t){console.error("SocketsForCordova: Cannot register WP event dispatcher, Error: "+t)}),o,"registerWPEventDispatcher",[])})),t.exports=n}}]);